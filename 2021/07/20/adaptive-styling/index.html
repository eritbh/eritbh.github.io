<!DOCTYPE html>
<html lang="en-US" dir="ltr">

<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Adaptive Styling On the Modern Web</title>

<link rel="alternate" type="application/atom+xml" title="Hi I'm Erin" href="/feed.xml">

<link rel="stylesheet" type="text/css"
	href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;0,800;1,400;1,700&family=JetBrains+Mono:wght@400;700&display=swap">
<link rel="stylesheet" type="text/css" href="/css/normalize.8.0.1.css">
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="stylesheet" type="text/css" href="/css/theme-button.css">
<link rel="stylesheet" type="text/css" href="/css/solarized-light.css">
<link rel="stylesheet" type="text/css" href="/css/solarized-dark.css">
<!-- <link rel="stylesheet" type="text/css" href="/css/ariake-dark.css"> -->

<!-- included before content to avoid flashing -->
<script src="/js/theme.js"></script>

<!-- Social/embed info tags -->
<meta property="og:title" content="Adaptive Styling On the Modern Web &middot; Hi I'm Erin">
<meta property="og:description" content="When I sat down to do the styling for this blog, my goal was to create a relatively lightweight setup that would be readable, accessible, and visually clean, taking advantage..."><meta property="twitter:card" content="summary">
<meta property="og:image" content="https://github.com/pages/eritbh/assets/umbreon-2x.png">
<meta property="og:image:alt" content="Shiny Umbreon doing a run"><meta property="og:url" content="https://github.com/pages/eritbh/2021/07/20/adaptive-styling/"><meta property="og:type" content="article">
<meta property="article:published_time" content="2021-07-20 00:00:00 +0000">
<meta property="article:modified_time" content="2021-07-20 00:00:00 +0000">
<meta property="article:author" content="eritbh"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#EFE8E4">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#202020">
</head>

<body>
	<header class="site-header site-header--has-link">
	<h2 class="site-header__title">
		<a href="/">
			Hi I'm Erin
		</a>
	</h2>
</header>
<main>
	<header class="post-meta">
		<h1 class="post-meta__title">Adaptive Styling On the Modern Web</h1><span class="post-meta__date">
			<time datetime="2021-07-20 00:00:00 +0000">20 July 2021</time>
			</span></header>

	<p>When I sat down to do the styling for this blog, my goal was to create a relatively lightweight setup that would be readable, accessible, and visually clean, taking advantage of CSS and user-agent features rather than relying on fancy UI components or a heavy JS framework. In this post I’ll be talking a bit about the CSS features I used to do it, and why I’m reconsidering my attachment to CSS preprocessors for projects like this.</p>

<h2 id="css-variables-and-page-themes">CSS Variables and Page Themes</h2>

<p>You see that little dark/light button at the bottom right corner of your screen? That’s a theme toggle, baby, and it’s <em>stupid simple</em> thanks to the magic of CSS variables (<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*">Custom properties</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/var()"><code class="language-plaintext highlighter-rouge">var()</code></a>, to be precise). They can do all kinds of cool stuff, from simple color storage so you can stop repeating the same hex code over and over again, to more advanced, dynamic uses enabled by their cascading nature. For as long as I’ve known about these, I’ve thought of page themes as an ideal demonstration of how powerful they can be. It’s super simple to set up variables that change states based on an attribute of the <code class="language-plaintext highlighter-rouge">html</code> element:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">html</span> <span class="p">{</span>
	<span class="py">--background</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
	<span class="py">--foreground</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>
	<span class="py">--header</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s1">"dark"</span><span class="o">]</span> <span class="p">{</span>
	<span class="py">--foreground</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
	<span class="py">--background</span><span class="p">:</span> <span class="no">gray</span><span class="p">;</span>
	<span class="py">--header</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Because custom properties (the properties that start with <code class="language-plaintext highlighter-rouge">--</code>) cascade and inherit just like normal CSS properties, all the elements underneath <code class="language-plaintext highlighter-rouge">&lt;html&gt;</code> in the DOM will have the values of these properties set based on the <code class="language-plaintext highlighter-rouge">data-theme</code> attribute. Once you’ve got that set up, you only need to declare your other page styles once, in terms of the variables you just set:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">body</span> <span class="p">{</span>
	<span class="nl">color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--foreground</span><span class="p">);</span>
	<span class="nl">background</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--background</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">header</span> <span class="p">{</span>
	<span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--header</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then, to see the theme in action, you just need a little Javascript to toggle the theme attribute:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">toggleTheme</span> <span class="p">()</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">currentTheme</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">data-theme</span><span class="dl">'</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">currentTheme</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">dark</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
		<span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">data-theme</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">light</span><span class="dl">'</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">data-theme</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">dark</span><span class="dl">'</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>CSS variables let developers define theme properties all in one place, without the need for a preprocessor, and with support for switching theme based on pretty much any CSS selector. This flexibility being built into the language, filling a role that was long reserved for messy Webpack configurations in web apps, makes me legitimately excited to be writing plain, vanilla CSS again.</p>

<p>You’ll also notice that this scheme allows for graceful degredation from the beginning. The script I presently have handling the theme toggle for this site, for example, adds the button it uses itself, so if Javascript is disabled or unsupported for some reason, the site still displays its default theme. What’s more, I’ve added some <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme"><code class="language-plaintext highlighter-rouge">prefers-color-scheme</code></a> magic to make the default theme degrade into the user’s OS theme, where available, whether scripts are enabled or not!</p>

<h2 id="dynamic-sizing-and-responsiveness">Dynamic Sizing and Responsiveness</h2>

<p>Responsive design is about more than just ensuring your content fits on phone screens. It’s about optimizing the viewing experience so it feels appropriate for the viewing context. Phone screens don’t have as much space for things like exaggerated headlines or wide margins, and while most modern CSS frameworks are designed with a “mobile-first” philosophy, they typically achieve this using rigid media queries that draw hard lines between “phone” and “tablet” and “laptop.”</p>

<p>Personally, I prefer to do a bit more than hiding navigation menus behind hamburger icons when my site is being viewed from a phone. I want to match the density of the layout—text size, margin width, <em>everything</em>—to the size of the device presenting it. And to facilitate this, I’ve come up with a little helper I call the <strong>expanding <code class="language-plaintext highlighter-rouge">rem</code></strong>. Here’s what it looks like:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
	<span class="py">--expanding-rem</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0rem</span><span class="p">,</span> <span class="p">(</span><span class="m">100vw</span> <span class="n">-</span> <span class="m">52rem</span><span class="p">)</span> <span class="p">/</span> <span class="m">12</span><span class="p">,</span> <span class="m">1rem</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This line uses <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/length#viewport-percentage_lengths"><code class="language-plaintext highlighter-rouge">vw</code></a> units and the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/clamp()"><code class="language-plaintext highlighter-rouge">clamp()</code></a> function to create a length value that scales up with page size. The idea behind this value is that it can be used to decrease the size of whitespace, headline text, etc. based on the size of the screen. In my case, screens less than 52 rem (around 800 pixels) wide have the smallest amount of whitespace, and sites more than 64rem (around 1000 pixels) have the most. Using <code class="language-plaintext highlighter-rouge">clamp()</code> ensures that the base value always stays between 0 and 1 rem, and when used in combination with <code class="language-plaintext highlighter-rouge">calc()</code>, it forms the basis of the responsive design of this site. Page headings and margins are scaled down on mobile devices so the content fits comfortably on the screen, while the overall layout is spaced more generously on desktops, where increased screen size affords more space to visual emphasis and clarity.</p>

<p>In order to use the unit, <code class="language-plaintext highlighter-rouge">calc()</code> is used to create lengths that scape proportionally to the expanding unit. If you want a length that scales between 0 and 2, instead of 0 and 1, just multiply it by 2. If you want a length that scales between 1 and 3, multiply by 2 and add 1. The math can seem tricky to work out at first, but pretty much any range you want can be expressed by a multiplication and an addition. Here’s some examples:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">h1</span> <span class="p">{</span>
	<span class="c">/* Vertical padding varies between 1rem and 3rem */</span>
	<span class="nl">margin</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">2</span> <span class="err">*</span> <span class="n">var</span><span class="p">(</span><span class="n">--expanding-rem</span><span class="p">)</span> <span class="err">+</span> <span class="m">1rem</span><span class="p">)</span> <span class="m">0</span><span class="p">;</span>
	<span class="c">/* Font size varies between 1.5 and 3 times larger than body font size */</span>
	<span class="nl">font-size</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">1.5</span> <span class="err">*</span> <span class="n">var</span><span class="p">(</span><span class="n">--expanding-rem</span><span class="p">)</span> <span class="err">+</span> <span class="m">1.5rem</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>I personally chose to use <code class="language-plaintext highlighter-rouge">rem</code> as the base unit for this layout, but this technique isn’t limited to <code class="language-plaintext highlighter-rouge">rem</code> - in fact, it can be generically applied to basically any unit. For example, if you want to make a value that scales between 0 and 1px between the screen widths 400px and 800px, you could use the following to get your <code class="language-plaintext highlighter-rouge">--expanding-unit</code>:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
	<span class="py">--scale-width-min</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
	<span class="py">--scale-width-max</span><span class="p">:</span> <span class="m">800px</span><span class="p">;</span>
	<span class="py">--expanding-unit</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0px</span><span class="p">,</span> <span class="p">(</span><span class="m">100vw</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--scale-width-min</span><span class="p">))</span> <span class="p">/</span> <span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--scale-width-max</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--scale-width-min</span><span class="p">)),</span> <span class="m">1px</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p>I could go a lot more in depth about my thoughts on web design as a whole, and maybe I will in a future post. But for now I figured I would just highlight a couple of the things that make me excited about CSS and designing for the web, in a way I haven’t been since I first started learning web technologies years ago. Hopefully this information is helpful!</p>


</main><footer><p>
		<i>Last modified <time datetime="2021-07-20 00:00:00 +0000">20 July 2021</time></i>
	</p><nav>
		<ul><li><a href="/">Home</a></li><li><a href="/posts/">Posts</a></li><li><a href="/erin/">Me</a></li><li><a href="/photos/">Photos</a></li><li><a href="/feed.xml">Feed</a></li>
		</ul>
		<ul><li><a href="https://tech.lgbt/@eritbh" rel="me">Mastodon</a></li><li><a href="https://twitter.com/eritbh" rel="me">Twitter</a></li><li><a href="https://github.com/eritbh" rel="me">GitHub</a></li><li><a href="https://ko-fi.com/eritbh" rel="me">Donate</a></li></ul>
	</nav>
</footer>


	<!-- Only add the theme button to the page if JS is allowed -->
	<script>document.write('<button class="theme-button" aria-label="Toggle theme" title="Toggle theme" onclick="toggleTheme()"></button>');</script>

	<!-- Add links to heading anchors for easy sharing -->
	<script src="/js/anchor.js"></script>

	<!-- Do some extra RTL text handling if loaded in Google Translate -->
	<script>if (window.location.hostname.endsWith('.translate.goog')) document.write('<script src="/js/translate.js"><\/script>');</script>
</body>

</html>
